<!DOCTYPE html>
<html lang="en">
<head>
ยย<meta charset="UTF-8">
ยย<title>HealthAI Application</title>
ยย<link rel="stylesheet" href="/static/css/style.css">
ยย<!-- โ Include Chart.js library -->
ยย<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
ยย<div class="background-image"></div>
ยย<div class="background-overlay"></div>

ยย<!-- Top Navbar -->

<div class="navbar">
ยย<h1 style="font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">ยยยHealthAI : Intelligent Healthcare Assistant Using IBM Granite</h1>
</div>


ยย<!-- Sidebar -->
ยย<div class="sidebar">
ยยยย<a href="#" data-target="homePanel">๐ Home</a>
ยยยย<a href="#" data-target="chatPanel">๐ฌ Patient Chat Assistant</a>
ยยยย<a href="#" data-target="predictPanel">๐ฉบ Disease Identifier</a>
ยยยย<a href="#" data-target="remedyPanel">๐ฟ Home Remedies</a>
ยยยย<a href="#" data-target="treatmentPanel">๐ Treatment Plan &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generator</a>
ยยยยย<a href="#" data-target="dashboardPanel">๐ Health Dashboard</a>
ยยยย<a href="#" data-target="tipsPanel">๐ก Health Tips</a>
ยย</div>

ยย<!-- Main Content -->
ยย<div class="main">

ยยยย<!-- Home Section -->
ยยยย<div id="homePanel" class="panel" style="display: block;">
ยยยยยย<div class="card">
ยยยยยยยย<h1>Welcome to HealthAI</h1>
ยยยยยยยย<p><b>
ยยยยยยยยยยHealthAI is your personal healthcare assistant powered by IBM WatsonX.
ยยยยยยยยยยThis app can predict diseases based on symptoms, suggest natural remedies,
ยยยยยยยยยยand provide daily health tips. It also includes a conversational assistant
ยยยยยยยยยยto help answer general health-related queries using powerful AI models.
ยยยยย</b>ยยย</p>
ยยยยยย</div>
ยยยย</div>

ยยยย<!-- Patient Chat Section -->
ยยยย<div id="chatPanel" class="panel">
ยย<div class="chat-card">
ยยยย<h3>๐ฌ Patient Chat Assistant</h3>
ยยยย<div id="chatWindow" class="chat-window"></div>

ยยยย<div class="chat-input">
ยยยยยย<textarea id="chatInput" placeholder="Ask your health question..."></textarea>
ยยยยยย<button onclick="sendChat()">Send</button>
ยยยย</div>
ยย</div>
</div>



ยยยย<!-- Symptoms Predictor Section -->
ยยยย<div id="predictPanel" class="panel">
ยยยยยย<div class="card">
ยยยยยยยย<h3>๐ฉบ Disease Identifier</h3>
ยยยยยยยย<textarea id="symptomInput" placeholder="Enter your symptoms..."></textarea>
ยยยยยยยย<button onclick="submitForm('/predict', 'symptomInput', 'predictResult')">Get Result</button>
ยยยยยยยย<div id="predictResult" class="result"></div>
ยยยยยย</div>
ยยยย</div>

ยยยย<!-- Remedies Section -->
ยยยย<div id="remedyPanel" class="panel">
ยยยยยย<div class="card">
ยยยยยยยย<h3>๐ฟHome Remedies</h3>
ยยยยยยยย<textarea id="remedyInput" placeholder="Enter symptoms or disease..."></textarea>
ยยยยยยยย<button onclick="submitForm('/remedies', 'remedyInput', 'remedyResult')">Get Remedies</button>
ยยยยยยยย<div id="remedyResult" class="result"></div>
ยยยยยย</div>
ยยยย</div>
ยยย<!-- Treatment Plan -->
<div id="treatmentPanel" class="panel" style="display: none;">
ยย<div class="card-container">
ยยยย
ยยยย<!-- Form Card -->
ยยยย<div class="treatment-card">
ยยยยยย<h3>๐ Treatment Plan Generator</h3>
ยยยยยย<input type="number" id="ageInput" placeholder="Age">
ยยยยยย<input type="text" id="genderInput" placeholder="Gender (e.g., Male/Female)">
ยยยยยย<input type="text" id="conditionInput" placeholder="Condition (e.g., stomach pain)">
ยยยยยย<input type="text" id="medicationsInput" placeholder="Current Medications (e.g., bp) [This field is optional]">
ยยยยยย<button onclick="getTreatmentPlan()">Get Plan</button>
ยยยย</div>

ยยยย<!-- Popup/Output Card -->
ยยยย<div id="treatmentResults" class="popup-card">
ยยยยยย<!-- Treatment plan content will be injected here by JS -->
ยยยย</div>

ยย</div>
</div>
<!-- Dashboard Panel -->
<div id="dashboardPanel" class="panel">
ยย<div class="card scrollable-dashboard">
ยยยย<h3>๐ Health Dashboard</h3>
ยยยย<p>Enter your 7-day data (comma-separated):</p>

ยยยย<label>Heart Rate</label>
ยยยย<textarea id="heartRateInput" placeholder="e.g. 72, 75, 78, 80, 77, 74, 76"></textarea>

ยยยย<label>Blood Pressure (Systolic)</label>
ยยยย<textarea id="bpInput" placeholder="e.g. 120, 125, 130, 128, 124, 122, 126"></textarea>

ยยยย<label>Blood Glucose</label>
ยยยย<textarea id="glucoseInput" placeholder="e.g. 95, 100, 105, 110, 108, 102, 106"></textarea>

ยยยย<button onclick="getInsights()">Generate AI Insights + Chart</button>

ยยยย<div id="insightsResult" class="result" style="white-space: pre-wrap; margin-top: 20px;"></div>

ยยยย<!-- Chart Container with Scroll if Needed -->
ยยยย<div style="overflow-x: auto; overflow-y: auto; max-height: 400px; margin-top: 20px;">
ยยยยยย<canvas id="healthChart" width="1200" height="600" style="background: white; border-radius: 8px;"></canvas>
ยยยย</div>
ยย</div>
</div>


ยย<!-- JavaScript -->
ยย<script>
ยยยย// Panel switching
ยยยยdocument.querySelectorAll('.sidebar a').forEach(link => {
ยยยยยยlink.addEventListener('click', e => {
ยยยยยยยยe.preventDefault();
ยยยยยยยยconst target = link.getAttribute('data-target');
ยยยยยยยยif (!target) return;
ยยยยยยยยdocument.querySelectorAll('.panel').forEach(panel => panel.style.display = 'none');
ยยยยยยยยdocument.getElementById(target).style.display = 'block';
ยยยยยย});
ยยยย});

ยยยย// Generic form submission
ยยยยasync function submitForm(url, inputId, outputId) {
ยยยยยยconst input = document.getElementById(inputId).value;
ยยยยยยconst res = await fetch(url, {
ยยยยยยยยmethod: 'POST',
ยยยยยยยยheaders: {
ยยยยยยยยยย'Content-Type': 'application/x-www-form-urlencoded'
ยยยยยยยย},
ยยยยยยยยbody: `user_input=${encodeURIComponent(input)}`
ยยยยยย});
ยยยยยยconst data = await res.json();
ยยยยยยdocument.getElementById(outputId).innerText = data.result || "โ No response";
ยยยย}

ยยยย// Chatbot logic
ยยยยasync function sendChat() {
ยยยยยยconst input = document.getElementById("chatInput").value.trim();
ยยยยยยif (!input) return;

ยยยยยยconst chatWindow = document.getElementById("chatWindow");

ยยยยยยconst userBubble = document.createElement("div");
ยยยยยยuserBubble.className = "chat-bubble user-bubble";
ยยยยยยuserBubble.innerText = input;
ยยยยยยchatWindow.appendChild(userBubble);

ยยยยยยdocument.getElementById("chatInput").value = "";

ยยยยยยtry {
ยยยยยยยยconst res = await fetch("/chat", {
ยยยยยยยยยยmethod: "POST",
ยยยยยยยยยยheaders: {
ยยยยยยยยยยยย"Content-Type": "application/x-www-form-urlencoded"
ยยยยยยยยยย},
ยยยยยยยยยยbody: `user_input=${encodeURIComponent(input)}`
ยยยยยยยย});

ยยยยยยยยconst data = await res.json();

ยยยยยยยยconst botBubble = document.createElement("div");
ยยยยยยยยbotBubble.className = "chat-bubble bot-bubble";
ยยยยยยยยbotBubble.innerText = data.result || "โ No response received.";
ยยยยยยยยchatWindow.appendChild(botBubble);
ยยยยยย} catch (error) {
ยยยยยยยยconsole.error("Chat error:", error);
ยยยยยยยยconst errorBubble = document.createElement("div");
ยยยยยยยยerrorBubble.className = "chat-bubble bot-bubble";
ยยยยยยยยerrorBubble.innerText = "โ๏ธ Error communicating with server.";
ยยยยยยยยchatWindow.appendChild(errorBubble);
ยยยยยย}

ยยยยยยchatWindow.scrollTop = chatWindow.scrollHeight;
ยยยย}

ยยยย// Health tips
ยยยยasync function getTips() {
ยยยยยยconst res = await fetch('/tips');
ยยยยยยconst data = await res.json();
ยยยยยยconst container = document.getElementById("tipsResult");
ยยยยยยcontainer.innerHTML = "";
ยยยยยยconst lines = data.result.split(/\n|โข|๐|-/).filter(l => l.trim());
ยยยยยยlines.forEach(line => {
ยยยยยยยยconst tip = document.createElement("div");
ยยยยยยยยtip.className = "tip-card";
ยยยยยยยยtip.innerText = line.trim();
ยยยยยยยยcontainer.appendChild(tip);
ยยยยยย});
ยยยย}

ยยยย// AI Insights for dashboard
ยยlet chartInstance;

async function getInsights() {
ยยconst heart = document.getElementById("heartRateInput").value.trim();
ยยconst bp = document.getElementById("bpInput").value.trim();
ยยconst sugar = document.getElementById("glucoseInput").value.trim();

ยยif (!heart || !bp || !sugar) {
ยยยยalert("Please fill in all fields.");
ยยยยreturn;
ยย}

ยยconst formData = new FormData();
ยยformData.append("heart_rate", heart);
ยยformData.append("blood_pressure", bp);
ยยformData.append("glucose", sugar);

ยยconst res = await fetch("/ai-insights", {
ยยยยmethod: "POST",
ยยยยbody: formData
ยย});

ยยconst data = await res.json();
ยยdocument.getElementById("insightsResult").innerText = data.result || "โ๏ธ No insights returned.";

ยย// Draw Chart
ยยconst labels = ["Day 1", "Day 2", "Day 3", "Day 4", "Day 5", "Day 6", "Day 7"];
ยยconst heartData = heart.split(",").map(Number);
ยยconst bpData = bp.split(",").map(Number);
ยยconst sugarData = sugar.split(",").map(Number);

ยยconst ctx = document.getElementById("healthChart").getContext("2d");
ยยif (chartInstance) chartInstance.destroy();

ยยchartInstance = new Chart(ctx, {
ยยยยtype: 'line',
ยยยยdata: {
ยยยยยยlabels: labels,
ยยยยยยdatasets: [
ยยยยยยยย{
ยยยยยยยยยยlabel: 'Heart Rate',
ยยยยยยยยยยdata: heartData,
ยยยยยยยยยยborderColor: '#ff6384',
ยยยยยยยยยยbackgroundColor: 'rgba(255, 99, 132, 0.2)',
ยยยยยยยยยยfill: true
ยยยยยยยย},
ยยยยยยยย{
ยยยยยยยยยยlabel: 'Blood Pressure',
ยยยยยยยยยยdata: bpData,
ยยยยยยยยยยborderColor: '#36a2eb',
ยยยยยยยยยยbackgroundColor: 'rgba(54, 162, 235, 0.2)',
ยยยยยยยยยยfill: true
ยยยยยยยย},
ยยยยยยยย{
ยยยยยยยยยยlabel: 'Blood Glucose',
ยยยยยยยยยยdata: sugarData,
ยยยยยยยยยยborderColor: '#ffce56',
ยยยยยยยยยยbackgroundColor: 'rgba(255, 206, 86, 0.2)',
ยยยยยยยยยยfill: true
ยยยยยยยย}
ยยยยยย]
ยยยย},
ยยยยoptions: {
ยยยยยยresponsive: true,
ยยยยยยmaintainAspectRatio: false,
ยยยยยยplugins: {
ยยยยยยยยlegend: { position: 'bottom' },
ยยยยยยยยtitle: {
ยยยยยยยยยยdisplay: true,
ยยยยยยยยยยtext: 'Health Trends Over 7 Days'
ยยยยยยยย}
ยยยยยย},
ยยยยยยscales: {
ยยยยยยยยy: {
ยยยยยยยยยยbeginAtZero: false
ยยยยยยยย}
ยยยยยย}
ยยยย}
ยย});
}


ยย</script>



ยยยย<!-- Health Tips Section -->
ยยยย<div id="tipsPanel" class="panel">
ยยยยยย<div class="card tips-card">
ยยยยยยยย<h3>๐ Health Tips Generator </h3>
ยยยยยยยย<button onclick="getTips()" class="tips-btn">Get Health Tips</button>
ยยยยยย</div>
ยยยยยย<div id="tipsResult" class="tips-result"></div>
ยยยย</div>

ยย</div>

ยย<!-- Script -->
ยย<script src="/static/js/app.js"></script>
ยย<script>
ยยยย// Sidebar Navigation Logic
ยยยยdocument.querySelectorAll('.sidebar a').forEach(link => {
ยยยยยยlink.addEventListener('click', e => {
ยยยยยยยยe.preventDefault();
ยยยยยยยยconst target = link.getAttribute('data-target');
ยยยยยยยยdocument.querySelectorAll('.panel').forEach(panel => panel.style.display = 'none');
ยยยยยยยยdocument.getElementById(target).style.display = 'block';
ยยยยยย});
ยยยย});
ยย</script>
</body>
</html>
